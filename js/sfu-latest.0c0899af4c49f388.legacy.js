"use strict";(("undefined"!=typeof self?self:this).webpackChunkshopee_pc=("undefined"!=typeof self?self:this).webpackChunkshopee_pc||[]).push([[2944],{77529:function(e,t,i){i.d(t,{rP:function(){return Ht}});var r,n,a,o,s,c,l,p,u,d,h,f,v,m,g,y,_,w,b,R,k,x=i(36784),C=i(45727),H=i(87800),S="device_sz_fingerprint",P="sz-token",E="af-ac-enc-sz-token",A="x-sz-sdk-version",T="d-nonptcha-sync",F="/verify/traffic",O="/verify/traffic/error",I="/buyer/login",U={onInit:function(){},onComplete:function(){},onFail:function(){},onTimeout:function(){}},D=((a={})[(n=Le)(0)]=U,a[n(1)]=U,a.hookFUFetch=U,a.hookFUXhr=U,a),L={test:"90a081b48a9c87345189bda87a989d23",uat:"5a733eaa4e1df48aa36fd9316f093107",staging:"d9dd212362d63e8ddb085bb5bce5259f",stable:"dc6fe70845cb784460ead6c7fd76bb91",live:"f9ffc83459897a13dd14c537e84b1753"},Z=((r={}).env={test:"test.",stable:"test-stable.",staging:"staging.",liveish:"live-test.",live:"",uat:"uat."},r.cid={SG:"sg",TW:"xiapi",MY:"my",PH:"ph",TH:"th",ID:"id",VN:"vn",BR:"br",MX:"mx",CO:"co",CL:"cl",PL:"pl",AR:"xiapi",ES:"xiapi",FR:"xiapi",IN:"xiapi"},r),M=["/api/v2/item/get","/api/v4/item/get","/api/v4/pdp/get","/api/v4/pdp/get_pc","/api/v4/pdp/get_rw"],q=["/api/v4/search/search_facet","/api/v4/search/search_items","/api/v4/search/search_page_common","/api/v4/search/get_ymal_items","/api/v4/search/search_filter_config","/api/v4/search/search_mart_items","/api/v4/search/search_user"],B=["/api/v4/shop/get_shop_detail","/api/v4/shop/get_categories","/api/v4/shop/get_shop_tab","/api/v4/shop/rcmd_items","/api/v4/shop/get_shop_base","/api/v4/shop/get_shop_seo","/api/v4/shop/get_products_tab_data","/api/v4/shop/get_membership_data","/api/v4/shop/get_campaign_preview","/api/v4/shop/get_top_products","/api/v4/shop/get_shop_seller_show","/api/v4/shop/get_shop_seller_info","/api/v4/shop/is_show","/api/v4/shop/get_shop_by_user","/api/v4/shop/get_follow_prize_campaign","/api/v4/shop/get_shop_base_preview","/api/v4/shop/search_items","/api/v4/shop/get_shop_core_info","/api/v4/shop/get_popup_data","/api/v4/shop/get_campaign_tab_data","/api/v4/shop/block_user","/api/v4/shop/get_scp_list","/api/v4/shop/get_shop_tab_preview","/api/v4/shop/unfollow","/api/v4/shop/follow"],z=Object.freeze({REQUEST_TIMEOUT:-99,FE_SERVER_ERROR:-999,SERVER_ERROR:10005,t:90309999});function N(){return["Dq7AQimSc8sODya7j0aU","Fg6YuimSc8sODya7j0aU","QfhAu0QSCXiIQgSrCLi8FgsOl8sZQg6VDyASuxsOCL6OjgiBul","QfhAu0QSCXiIQgSrCLi8FgsOaL6Oc0seF0QAFG","QfhAu0QSCXiIQgSrCLi8FgsOsLsODquAc0i4Dq6I","C0YWQqKXs0iAQxuWCXaLCxSIDyl","cq74DjuOcysXl06IuLSB","u0s4s0sTags0DqmSaLSIu0sOCfhAFBl"]}(s=o||(o={}))[s.Captcha=1]="Captcha",s[s.ForceLogin=2]="ForceLogin",s[s.Redirect=5]="Redirect",s[s.FORCE_DOWNLOAD_APP=8]="FORCE_DOWNLOAD_APP",s[s.FORCE_BIND_PHONE=9]="FORCE_BIND_PHONE",s[s.VERIFY_PHONE=10]="VERIFY_PHONE",(l=c||(c={}))[l.Block=2]="Block",l[l.Challenge=3]="Challenge",(u=p||(p={}))[u.Level1=1]="Level1",u[u.Level2=2]="Level2",u[u.Level3=3]="Level3",(h=d||(d={})).External="1",h.Internal="2",(v=f||(f={})).ShopeeInternal="1",v.ShopeeApp="2",(g=m||(m={}))[g.AntiCrawler=0]="AntiCrawler",g[g.Dfp=1]="Dfp",(_=y||(y={})).Request="request",_.Success="success",_.Timeout="timeout",_.Failed="failed",(b=w||(w={}))[b.PC=0]="PC",b[b.RW=1]="RW",b[b.SHOPEELIVE=2]="SHOPEELIVE",b[b.BANK=3]="BANK",(k=R||(R={})).FORCEAPP="1",k.BINDPHONE="2",k.VERIFYPHONE="3";var j,V,W=!("undefined"==typeof window||!window.document||!window.document.createElement),X=/beeshop|shopee/i,Q=/shopee.*app_type=2(\s|$)/i,Y=/shopee-food-driver/i,G=/shopee-express-driver/i,J=/shopeepay|airpay/i,K=/mitra/i,$=/seatalk/i,ee=/shopee-toc-acc-sdk/i,te=/now/i,ie=/spinjam.*app_type=20(\s|$)/i;(V=j||(j={}))[V.Shopee=1]="Shopee",V[V.ShopeeFoodDriver=2]="ShopeeFoodDriver",V[V.ShopeePartner=3]="ShopeePartner",V[V.ShopeeExpressDriver=4]="ShopeeExpressDriver",V[V.ShopeePay=5]="ShopeePay",V[V.Mitra=6]="Mitra",V[V.SeaTalk=7]="SeaTalk",V[V.ShopeeAccountSdk=8]="ShopeeAccountSdk",V[V.ShopeeFoodBuyer=11]="ShopeeFoodBuyer",V[V.SPinjam=12]="SPinjam";var re=function(){return void 0!==function(e){if(void 0===e&&(e=function(){if(W)return window.navigator.userAgent}()),void 0!==e)return Y.test(e)?j.ShopeeFoodDriver:Q.test(e)?j.ShopeePartner:G.test(e)?j.ShopeeExpressDriver:K.test(e)?j.Mitra:$.test(e)?j.SeaTalk:ee.test(e)?j.ShopeeAccountSdk:te.test(e)?j.ShopeeFoodBuyer:J.test(e)?j.ShopeePay:X.test(e)?j.Shopee:ie.test(e)?j.SPinjam:void 0}()};function ne(e,t){var i=function(e,t){if(void 0===t&&(t=!1),!e)return"";var i=Object.keys(e).filter((function(t){return null!=e[t]}));return i.length?(t?"":"?")+i.sort().map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&"):""}(t);if(!i.substring(1))return e;var r=e.split("#"),n=r[0],a=r[1];return n=n.indexOf("?")>-1?n+"&"+i.substring(1):""+n+i,a?n+"#"+a:n}var ae=[/^(seller\.)((xiapi|sg|th|vn|id|ph|br|my|tw|mx|co|cl|in|ar|pl|fr|es)\.)((test|uat|staging|live-test|test-stable)\.)?shopee\.cn$/,/^(banhang\.)((test|uat|staging|live-test|test-stable)\.)?shopee\.vn$/,/^(seller\.)((test|uat|staging|live-test|test-stable)\.)?shopee\.(co\.(id|th)|com\.(ar|br|co|mx|my)|cl|es|fr|in|ph|pl|sg|tw)$/];function oe(e){if(!e)return!1;try{var t=new URL(e).hostname;return ae.some((function(e){return e.test(t)}))}catch(e){return!1}}function se(){return self.__ENV__}function ce(){return self.__LOCALE__}var le,pe=((le={}).malls={SG:"shopee.sg",TW:"shopee.tw",MY:"shopee.com.my",PH:"shopee.ph",TH:"shopee.co.th",ID:"shopee.co.id",VN:"shopee.vn",BR:"shopee.com.br",MX:"shopee.com.mx",CO:"shopee.com.co",CL:"shopee.cl",AR:"shopee.com.ar",FR:"shopee.fr",PL:"shopee.pl",ES:"shopee.es",IN:"shopee.in"},le.envs={test:"test.",stable:"test-stable.",staging:"staging.",liveish:"live-test.",live:"",uat:"uat."},le);function ue(e){var t=e.env,i=e.locale;return"https://"+pe.envs[t]+pe.malls[i]}var de=/web_sdk_host=snack/i;function he(e){var t=e.isRelative,i=e.host;return ne(""+(t?"":i)+e.path,e.params)}function fe(e){var t,i,r,n,a,o,s=e.history,c=e.redirectType,l=e.shouldReplaceHistory,p=e.absoluteRedirectPath,u=e.relativeRedirectPath;c!==d.External&&s?l?s.replace(u):re()?null===(t=window)||void 0===t||null===(i=t.WebViewJavascriptBridge)||void 0===i||i.callHandler("navigate",((a={}).url=p,a.popSelf=0,a.navbar={},a)):s.push(u):l?location.replace(p):re()?null===(r=window)||void 0===r||null===(n=r.WebViewJavascriptBridge)||void 0===n||n.callHandler("navigate",((o={}).url=p,o.popSelf=0,o.navbar={},o)):location.href=p}function ve(e){var t=e.history,i=e.next,r=e.appKey,n=e.scene,a=void 0===n?"crawler_item":n,o=e.shouldReplaceHistory,s=void 0===o||o,c=e.clientId,l=e.redirectType,p=void 0===l?d.External:l,u=e.verificationPageHost,h=void 0===u?location.origin:u,f=e.antiBotTrackingId,v=e.setRedirecting;p!==d.External&&t||v&&v();var m,g,y,_=(0,H.Z)({is_initial:!0,app_key:r,scene:a,client_id:c,redirect_type:p,next:i,should_replace_history:s,anti_bot_tracking_id:f},i.includes("__mobile__")||re()?{__mobile__:1}:{});fe(((y={}).history=t,y.redirectType=p,y.shouldReplaceHistory=s,y.absoluteRedirectPath=he(((g={isRelative:!1}).host=h,g.path=F,g.params=_,g)),y.relativeRedirectPath=he(((m={isRelative:!0}).host=h,m.path=F,m.params=_,m)),y))}function me(e){var t,i,r,n,a,o,s=e.history,c=e.trackingId,l=e.shouldReplaceHistory,p=void 0===l||l,u=e.redirectType,h=void 0===u?d.External:u,f=e.verificationPageHost,v=void 0===f?location.origin:f,m=e.homeUrl,g=e.isLoggedIn,y=void 0===g||g,_=e.error_type,w=(0,H.Z)({tracking_id:c,is_logged_in:y,home_url:m||location.origin},_?((r={}).type=_,r):{},_===R.BINDPHONE||_===R.VERIFYPHONE?((i={}).next=location.href,i):{},location.origin.includes("xiapibuy")?((t={}).origin=location.origin,t):{},re()?{__mobile__:1}:{});fe(((o={}).history=s,o.redirectType=h,o.shouldReplaceHistory=p,o.absoluteRedirectPath=he(((a={isRelative:!1}).host=v,a.path=O,a.params=w,a)),o.relativeRedirectPath=he(((n={isRelative:!0}).host=v,n.path=O,n.params=w,n)),o))}function ge(e){var t,i=e.history,r=e.next,n=e.redirectType,a=void 0===n?d.External:n,o=e.shouldReplaceHistory,s=void 0===o||o,c=e.verificationPageHost,l=void 0===c?location.origin:c,p=e.isFromGoogleAdsPDP,u=(0,H.Z)({next:r},r.includes("__mobile__")||re()?{__mobile__:1}:{},p?((t={}).is_from_fu=(new Date).getTime(),t):{});if(function(){if(W){var e=window.navigator.userAgent;if(de.test(e))return!0}return!1}())window.SHPLSBridge&&(0,C.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.SHPLSBridge.checkLogin();case 2:if(e.t0=!e.sent,!e.t0){e.next=7;break}return e.next=6,window.SHPLSBridge.login();case 6:window.location.reload();case 7:case"end":return e.stop()}}),e)})))();else if(re()){var h,f;null===(h=window)||void 0===h||null===(f=h.WebViewJavascriptBridge)||void 0===f||f.callHandler("login",((m={}).redirectPath=ne("main",((v={}).apprl=r,v)),m.redirectTab=1,m),(function(e){0===(null==e?void 0:e.error)&&location.replace(r)}))}else{var v,m;if(location.origin.includes("xiapibuy")){var g=window.location.origin+"/api/seller_platform/nonce/callback/",y=window.btoa(JSON.stringify(((S={}).next=window.location.href,S))),_=se();fe(((k={}).history=i,k.redirectType=d.External,k.shouldReplaceHistory=s,k.absoluteRedirectPath=he(((R={isRelative:!1}).host="https://account.seller."+(Z.env[_]||"")+"shopee.com",R.path="/signin/oauth/identifier",R.params=((b={account_type:2}).client_id=L[_]||L.live,b.require_passwd=!0,b.login_types="[1,2,3,4,5]",b.redirect_uri=g,b.region=ce(),b.response_type="tob_nonce",b.scope="profile",b.state=y,b),R)),k.relativeRedirectPath=he(((w={isRelative:!0}).host=l,w.path=I,w.params=u,w)),k))}else{var w,b,R,k,S,P,E,A;fe(((A={}).history=i,A.redirectType=a,A.shouldReplaceHistory=s,A.absoluteRedirectPath=he(((E={isRelative:!1}).host=l,E.path=I,E.params=u,E)),A.relativeRedirectPath=he(((P={isRelative:!0}).host=l,P.path=I,P.params=u,P)),A))}}}function ye(e,t){return new Promise((function(i,r){setTimeout((function(){try{i(t())}catch(e){r(e)}}),e)}))}var _e="1.12.15",we=function(e){var t,i,r,n;!oe(window.location.href)&&(null===(t=window)||void 0===t||null===(i=t.Sentry)||void 0===i||i.captureException(e,((n={}).tags=((r={sentryProjectSlug:"shopee-secure-fetch-utils"}).sfuVersion=""+_e,r),n)))};function be(e){var t,i,r,n,a,s,l,p,u,h,f,v,m,g,y=e.antiCrawlerConfig,_=e.response,b=e.pathname,k=e.platform,x=e.source,C=e.setRedirecting,H=e.getRedirecting,S=e.triggerAntiCrawlerCustomizedErrorPage,P=e.triggerAntiCrawlerForceLogin,E=e.triggerAntiCrawlerVerification,A=e.enablePopup;if(_&&y){var T,O,I,U,D,L,M,q,B,N,j,V,X;if(_[3]?(M=(D=_)[4],q=D[0],B=D[1],V=D[2],j=D[3],N=null===(T=L=D[6])||void 0===T?void 0:T[0],X=null===(O=L)||void 0===O?void 0:O[1]):(M=(D=_).challenge_type,q=D.action_type,B=D.tracking_id,V=D.is_login,j=D.error,N=null===(I=D.captcha_extra_info)||void 0===I?void 0:I.tracking_id,X=null===(U=D.captcha)||void 0===U?void 0:U.business),j!==z.t)return;if(location.href.includes("/verify/traffic")||location.href.includes("/verify/captcha"))return;if(H&&C&&H())return;if(q===c.Block){var Q=k===w.SHOPEELIVE?location.origin+"/pc/setup":y.homeUrl;return void S((g={},g.trackingId=B||"",g.shouldReplaceHistory=y.shouldReplaceHistory,g.redirectType=y.redirectType,g.isLoggedIn=V,g.verificationPageHost=y.verificationPageHost,g.homeUrl=Q,g))}if(M===o.Captcha){var Y=k==w.PC||k==w.RW?(X||"TSS")+"."+w[k]:x?(X||"TSS")+"."+x:y.appKey;if(!Y)return;return void(A&&y.usePopupCaptcha?function(e){var t,i,r=e.appKey,n=e.scene,a=void 0===n?"crawler_item":n,o=e.clientId,s=e.shouldReplaceHistory,c=e.antiBotTrackingId,l=e.verificationPageHost;if(W){if(document.querySelector("#sfu-captcha-modal"))return;var p=document.createElement("div");p.setAttribute("id","sfu-captcha-modal"),p.classList.add("sfu-captcha-modal"),p.classList.add("open");var u=document.createElement("div");u.classList.add("sfu-captcha-modal-body"),p.appendChild(u);var h=document.createElement("iframe"),f=((i={is_initial:!0}).app_key=r,i.scene=a,i.client_id=o,i.redirect_type=d.Internal,i.use_popup=!0,i.should_replace_history=s,i.anti_bot_tracking_id=c,i.__mobile__="1",i),v=he(((t={isRelative:!1}).host=l||window.location.protocol+"//"+window.location.host,t.path=F,t.params=f,t));h.setAttribute("src",v),h.setAttribute("name","sfu-captcha-modal-iframe"),h.style.width="100%",h.style.height="100%",u.appendChild(h),document.body.appendChild(p),document.body.classList.add("sfu-captcha-modal-open");var m=document.createElement("script");m.setAttribute("type","text/javascript");var g=document.createTextNode("\n    function closeSFUCaptchaModal() {\n        var sfuCaptchaModal = document.querySelector('#sfu-captcha-modal');\n        if(sfuCaptchaModal){\n          sfuCaptchaModal.remove();\n        }\n        document.body.classList.remove('sfu-captcha-modal-open');\n    }\n    ");m.appendChild(g);var y=document.createElement("style");y.setAttribute("type","text/css");var _=document.createTextNode("\n    .sfu-captcha-modal {\n        display: none;\n        position: fixed; \n        inset: 0;\n        background-color: rgba(0, 0, 0, .75);\n        z-index: 100000;\n        overflow: auto;\n    }\n    .sfu-captcha-modal.open {\n        display: flex;\n    }\n    .sfu-captcha-modal-body {\n        width: 80vw;\n        max-width: 500px;\n        min-width:  400px;\n        height: 550px;\n        margin: auto; \n        background: #fff;\n    }\n    .sfu-captcha-modal iframe {\n      box-sizing: border-box;\n    }\n    body.sfu-captcha-modal-open {\n        overflow: hidden;\n    }");y.appendChild(_),document.getElementsByTagName("head")[0].appendChild(y),document.getElementsByTagName("head")[0].appendChild(m)}}((m={},m.clientId=y.captchaClientId||"",m.next=y.next||location.href,m.appKey=Y,m.scene="crawler_item",m.redirectType=y.redirectType,m.shouldReplaceHistory=y.shouldReplaceHistory,m.verificationPageHost=y.verificationPageHost,m.antiBotTrackingId=N,m)):E((v={},v.clientId=y.captchaClientId||"",v.next=y.next||location.href,v.appKey=Y,v.scene="crawler_item",v.redirectType=y.redirectType,v.shouldReplaceHistory=y.shouldReplaceHistory,v.verificationPageHost=y.verificationPageHost,v.antiBotTrackingId=N,v.setRedirecting=C,v)))}if(M===o.Redirect){var G=se(),J=ce();if(G&&J){var K="https://"+(Z.cid[J]||"xiapi")+"."+(Z.env[G]||"")+"xiapibuy.com";location.replace(K)}return}if(M===o.ForceLogin){var $,ee;if(location.href.includes("/buyer/login")||location.href.includes("/buyer/authenticate"))return;var te=location.pathname.startsWith("/product")&&location.href.includes("gads_t_sig");te&&(k===w.PC||k===w.RW)&&(window.BITrack?window.BITrack(((f={}).data=((h={type:"v3"}).timestamp=(new Date).getTime(),h.info=((u={operation:"action_sfu_handle"}).data=((p={code:1}).scenario=JSON.stringify(((l={}).response=_,l.pathname=b,l)),p),u),h),f)):!oe(window.location.href)&&(null===($=window)||void 0===$||null===(ee=$.Sentry)||void 0===ee||ee.captureMessage("BITrack is not defined",((s={}).tags=((a={sentryProjectSlug:"shopee-secure-fetch-utils"}).sfuVersion=""+_e,a),s)))),P(((n={}).next=y.next||location.href,n.redirectType=y.redirectType,n.shouldReplaceHistory=y.shouldReplaceHistory,n.verificationPageHost=y.verificationPageHost,n.isFromGoogleAdsPDP=te,n))}if(M===o.FORCE_DOWNLOAD_APP)return void S((r={},r.trackingId=B||"",r.shouldReplaceHistory=y.shouldReplaceHistory,r.redirectType=y.redirectType,r.verificationPageHost=y.verificationPageHost,r.error_type=R.FORCEAPP,r));if(M===o.FORCE_BIND_PHONE)return void S((i={},i.trackingId=B||"",i.shouldReplaceHistory=y.shouldReplaceHistory,i.redirectType=y.redirectType,i.verificationPageHost=y.verificationPageHost,i.error_type=R.BINDPHONE,i));if(M===o.VERIFY_PHONE)return void S((t={},t.trackingId=B||"",t.shouldReplaceHistory=y.shouldReplaceHistory,t.redirectType=y.redirectType,t.verificationPageHost=y.verificationPageHost,t.error_type=R.VERIFYPHONE,t))}}var Re=function(e,t,i,r){if(!e.allowCors&&!i)return!1;if(r&&e.limitMethods&&!e.limitMethods.some((function(e){return e.toLowerCase()===r.toLowerCase()})))return!1;switch(e.match){case"contain":if(t.includes(e.policyurl))return!e.exclude||!e.exclude.some((function(e){return t.includes(e)}));break;case"regexp":if(e.policyurl.test(t))return!e.exclude||!e.exclude.some((function(e){return t.includes(e)}));break;case"full":if(e.policyurl===t)return!0}return!1},ke=function(e,t,i,r){for(var n=0;n<e.length;n++){var a=e[n];if(Re(a,t,i,r))return a}},xe=function(){function e(e){void 0===e&&(e=20),this.items=[],this.maxSize=e}var t=e.prototype;return t.enqueue=function(e){this.size()>=this.maxSize&&(this.dequeue(),e instanceof Se&&this.items[0].civid),this.items.push(e)},t.dequeue=function(){return this.isEmpty()?"Underflow":this.items.shift()},t.isEmpty=function(){return 0===this.items.length},t.size=function(){return this.items.length},t.getItems=function(){return this.items},e}(),Ce=function(){function e(e,t){this.key=e,this.timestamp=t}return e.prototype.serialize=function(){var e=new ArrayBuffer(6),t=new DataView(e);return t.setUint16(0,this.key),t.setUint32(2,this.timestamp),e},e}(),He=function(){function e(e,t,i){this.x=e,this.y=t,this.timestamp=i}return e.prototype.serialize=function(){var e=new ArrayBuffer(8),t=new DataView(e);return t.setUint16(0,this.x),t.setUint16(2,this.y),t.setUint32(4,this.timestamp),e},e}(),Se=function(){function e(e,t,i,r,n,a,o,s,c,l,p){this.operation=e,this.timestamp=t,this.civid=i,this.page_type=r,this.page_section=n,this.target_type=a,this.last_civ_id=o,this.itemidl=s,this.itemidr=c,this.shopidl=l,this.shopidr=p}return e.prototype.serialize=function(e){var t=new ArrayBuffer(34),i=new DataView(t);i.setUint8(0,this.operation),i.setUint32(1,this.timestamp),i.setUint8(5,e.indexOf(this.civid));for(var r=0;r<this.page_type.length;r++)i.setUint8(6+r,this.page_type.charCodeAt(r));for(r=0;r<this.page_section.length;r++)i.setUint8(11+r,this.page_section.charCodeAt(r));return i.setUint8(16,this.target_type),i.setUint8(17,e.indexOf(this.last_civ_id)),i.setUint32(18,this.itemidl),i.setUint32(22,this.itemidr),i.setUint32(26,this.shopidl),i.setUint32(30,this.shopidr),t},e}(),Pe=function(){function e(e,t,i,r,n,a,o,s){this.basetimestampl=e,this.basetimestampr=t,this.cividmaplen=i,this.eventlen=r,this.oribitlen=n,this.cividmap=a,this.currentTimeOffset=o,this.nonce=s}return e.prototype.serialize=function(){var e=this.cividmap.length,t=new ArrayBuffer(23+e),i=new DataView(t);i.setUint32(0,this.basetimestampl),i.setUint32(4,this.basetimestampr),i.setUint8(8,this.cividmaplen),i.setUint8(9,this.eventlen),i.setUint8(10,this.oribitlen);for(var r=0;r<e;r++)i.setUint8(11+r,this.cividmap.charCodeAt(r));for(i.setUint32(11+e,this.currentTimeOffset),r=0;r<8;r++)i.setUint8(15+e+r,this.nonce[r]);return t},e}(),Ee=new xe(20),Ae=new xe(21),Te=new xe(5),Fe=new xe(5),Oe={view:1,auto_view:2,click:3,impression:4,other:5},Ie={item:1,shop:2,voucher:3,banner:4,category:5,skinny_banner:6,cluster:7,tab:8,other:9};function Ue(){try{var e=void 0!==performance.timeOrigin?performance.timeOrigin:performance.timing.navigationStart,t=Math.floor(performance.now());e<Math.pow(10,10)&&(e*=1e3);var i=Math.floor(e/Math.pow(10,9)),r=Math.floor(e%Math.pow(10,9)),n=[];Ee.getItems().map((function(e){n.includes(e.civid)||""===e.civid||n.push(e.civid),n.includes(e.last_civ_id)||""===e.last_civ_id||n.push(e.last_civ_id)})),Te.getItems().map((function(e){n.includes(e.civid)||""===e.civid||n.push(e.civid),n.includes(e.last_civ_id)||""===e.last_civ_id||n.push(e.last_civ_id)}));var a=function(e){void 0===e&&(e=8);for(var t=new Uint8Array(e),i=0;i<e;i++)t[i]=Math.floor(256*Math.random());return t}(),o=new Pe(i,r,n.length,Ee.size()+Te.size(),Ae.size(),n.join(""),t,a),s=23+o.cividmap.length+34*(Ee.size()+Te.size())+8*Ae.size()+6*Fe.size(),c=new ArrayBuffer(s),l=new Uint8Array(c);l.set(new Uint8Array(o.serialize()),0);var p=23+o.cividmap.length;Ee.getItems().map((function(e){(null==e?void 0:e.serialize)&&(l.set(new Uint8Array(e.serialize(n)),p),p+=34)})),Te.getItems().map((function(e){(null==e?void 0:e.serialize)&&(l.set(new Uint8Array(e.serialize(n)),p),p+=34)})),Ae.getItems().map((function(e){(null==e?void 0:e.serialize)&&(l.set(new Uint8Array(e.serialize()),p),p+=8)})),Fe.getItems().map((function(e){(null==e?void 0:e.serialize)&&(l.set(new Uint8Array(e.serialize()),p),p+=6)}));for(var u=btoa(String.fromCharCode.apply(null,Array.from(l))),d="",h=1,f=0;f<u.length;f++)u[f]===u[f+1]?h++:(d+=h>=5?"A|"+h+"|":u[f].repeat(h),h=1);return d}catch(e){return we(e),"error"}}function De(e){var t,r=e.locale,n=e.env,a=e.platform,o=e.source,s=e.ACConfig,c=e.performanceTrackings,l=void 0===c?D:c,p=e.enableGlobalHook,u=e.enableTMS,h=e.enablePopup,f=e.policies,v=e.onError,g=void 0===v?function(){}:v,y=null,_=null,b=null,R=null,k=null,F=null,O=!1;function I(){O=!0}function U(){return O}function L(e){(a===w.PC||a===w.RW)&&we(e)}function Z(e){return z.apply(this,arguments)}function z(){return z=(0,C.Z)((0,x.Z)().mark((function e(t){var o,s,c,p,u,d,h,f,v,g;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.history,s=t.onFail,c=void 0===s?function(){}:s,f=Le,a===w.BANK||(o&&(F=o),null!=_||null!=b||!W)){e.next=21;break}return e.prev=3,l[f(0)].onInit(),l[f(1)].onInit(),_=(0,C.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",i.e(1784).then(i.t.bind(i,1113,23)));case 1:case"end":return e.stop()}}),e)})))(),e.next=9,_;case 9:y=e.sent,l[f(1)].onComplete(),(r||n)&&(y.default?y.default.setSdkConfig((0,H.Z)({},r?((h={}).region=r,h):{},n?((d={}).env=n,d):{})):y.setSdkConfig((0,H.Z)({},r?((u={}).region=r,u):{},n?((p={}).env=n,p):{}))),b=y.default?y.default.initSdk(m.Dfp):y.initSdk(m.Dfp),R=ye(5e3,(function(){return{timeout:!0}})),k=ye(1e3,(function(){return{timeout:!0}})),l[f(0)].onComplete(),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),L(e.t0),null!==(v=(g=l[f(0)]).onFail)&&void 0!==v&&v.call(g),c();case 21:case"end":return e.stop()}}),e,null,[[3,18]])}))),z.apply(this,arguments)}function N(){var e,t=function(e){for(var t="",i=0;i<e.length;i++)t+=e[i].toString(16).padStart(2,"0");return t}(function(){for(var e=new Uint8Array(8),t=0;t<8;t++)e[t]=Math.floor(256*Math.random());return e}());return(e={})["af-ac-enc-dat"]=t,e}function j(e){return V.apply(this,arguments)}function V(){return V=(0,C.Z)((0,x.Z)().mark((function e(t){var i,r;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(void 0===t?{}:t).shouldWaitForDfpInit,r=void 0!==i&&i,e.prev=1,e.next=4,_;case 4:return e.next=6,Promise.race([b,r?R:k]);case 6:return e.abrupt("return",y.default?y.default.getClientCheckData():y.getClientCheckData());case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",(L(e.t0),g(e.t0),""));case 12:case"end":return e.stop()}}),e,null,[[1,9]])}))),V.apply(this,arguments)}function X(){return X=(0,C.Z)((0,x.Z)().mark((function e(t){var i,r,n,a,o,s,c,l;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.shouldWaitForDfpInit,r=void 0!==i&&i,n=t.useHeader,a=t.customDfp,e.prev=1,e.next=4,_;case 4:return e.next=6,Promise.race([b,r?R:k]);case 6:if("string"!=typeof a){e.next=10;break}e.t0=a,e.next=13;break;case 10:return e.next=12,j(((l={})[Le(5)]=r,l));case 12:e.t0=e.sent;case 13:return o=e.t0,e.abrupt("return",n?o.length>=300?{}:((c={})[P]=o,c):((s={})[S]=o,s));case 17:return e.prev=17,e.t1=e.catch(1),e.abrupt("return",(L(e.t1),g(e.t1),{}));case 20:case"end":return e.stop()}}),e,null,[[1,17]])}))),X.apply(this,arguments)}function Q(){return""+_e}function Y(){return G.apply(this,arguments)}function G(){return G=(0,C.Z)((0,x.Z)().mark((function e(){var t;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_;case 3:return t=y.default?y.default.getDegradedData():y.getDegradedData(),e.abrupt("return",t&&"string"==typeof t?[].concat(t).some((function(e){return e.charCodeAt(0)>127}))?"":t:"");case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(L(e.t0),""));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),G.apply(this,arguments)}function J(){return J=(0,C.Z)((0,x.Z)().mark((function e(){var t;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_;case 3:if(!y.default){e.next=9;break}return e.next=6,y.default.getLongToken();case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,y.getLongToken();case 11:e.t0=e.sent;case 12:return t=e.t0,e.abrupt("return",t&&"string"==typeof t?t:"");case 16:return e.prev=16,e.t1=e.catch(0),e.abrupt("return",(L(e.t1),""));case 19:case"end":return e.stop()}}),e,null,[[0,16]])}))),J.apply(this,arguments)}return function(){if(W&&p&&!window.__fu_hook){window.__fu_hook=!0,u&&function(){try{document.addEventListener("keydown",(function(e){try{var t,i=performance.now();if(void 0!==e.key&&null!==e.key)1==e.key.length?t=new Ce(e.key.charCodeAt(0),i):e.key.length>1&&(t=new Ce(e.key.charCodeAt(0)<<8|e.key.charCodeAt(e.key.length-1),i)),Fe.enqueue(t);else if(void 0!==e.keyCode){var r=new Ce(e.keyCode,i);Fe.enqueue(r)}}catch(e){return we(e),"error"}})),navigator.maxTouchPoints>0?(document.addEventListener("touchmove",(function(e){try{if(void 0!==e.touches&&null!==e.touches){var t=void 0;if(e.touches.length>0?t=e.touches:e.changedTouches.length>0&&(t=e.changedTouches),void 0!==t){var i=performance.now(),r=new He(t[0].clientX+1e4,t[0].clientY,i);Ae.enqueue(r)}}}catch(e){return we(e),"error"}})),document.addEventListener("touchend",(function(e){try{if(void 0!==e.touches&&null!==e.touches){var t=void 0;if(e.touches.length>0?t=e.touches:e.changedTouches.length>0&&(t=e.changedTouches),void 0!==t){var i=performance.now(),r=new He(t[0].clientX+1e4,t[0].clientY,i);Ae.enqueue(r)}}}catch(e){return we(e),"error"}}))):(document.addEventListener("mousemove",(function(e){try{var t=performance.now(),i=new He(e.clientX,e.clientY,t);Ae.enqueue(i)}catch(e){return we(e),"error"}})),document.addEventListener("click",(function(e){try{var t=performance.now(),i=new He(e.clientX+1e4,e.clientY,t);Ae.enqueue(i)}catch(e){return we(e),"error"}})))}catch(e){we(e)}if("function"==typeof window.IDBObjectStore){var e=IDBObjectStore.prototype.add;try{IDBObjectStore.prototype.add=function(t,i){try{if("object"==typeof t&&null!==t&&null!==t.data&&void 0!==t.data){var r=JSON.parse(t.data);if(null!==r.operation&&void 0!==r.operation){var n=-1!==Oe[r.operation]?Oe[r.operation]:0,a=r.event_timestamp-(void 0!==performance.timeOrigin?performance.timeOrigin:performance.timing.navigationStart),o=r.civ_id.replaceAll("-",""),s=r.page_type.slice(0,5),c=r.page_section.slice(0,5),l=0;""!=r.target_type&&null!==r.target_type&&(l=Ie[r.target_type]?Ie[r.target_type]:9);var p="";null!==r.last_civ_id&&void 0!==r.last_civ_id&&(p=r.last_civ_id.replaceAll("-",""));var u=0,d=0;if(null!==r.data&&void 0!==r.data){var h=r.data;if(null!==h.viewed_objects&&void 0!==h.viewed_objects&&h.viewed_objects.length>0){var f=h.viewed_objects[0];null!=f&&(null!==f.ctx_itemid&&void 0!==f.ctx_itemid&&(u=f.ctx_itemid),null!==f.itemid&&void 0!==f.itemid&&(u=f.itemid),null!==f.item_id&&void 0!==f.item_id&&(u=f.item_id),null!==f.ctx_shopid&&void 0!==f.ctx_shopid&&(d=f.ctx_shopid),null!==f.shopid&&void 0!==f.shopid&&(d=f.shopid),null!==f.shop_id&&void 0!==f.shop_id&&(d=f.shop_id))}}var v=Math.floor(u/Math.pow(10,9)),m=u%Math.pow(10,9),g=Math.floor(d/Math.pow(10,9)),y=d%Math.pow(10,9);3==n?Te.enqueue(new Se(n,a,o,s,c,l,p,v,m,g,y)):Ee.enqueue(new Se(n,a,o,s,c,l,p,v,m,g,y))}}}catch(e){we(e)}return e.call(this,t,i)}}catch(e){we(e)}}}();var e=window.fetch;window.fetch=(0,C.Z)((0,x.Z)().mark((function t(){var i,c,p,v,m,g,y,_,b,R,k,C,S,P,O,D,z,j,V,W,X,G,J,K,$,ee,te,ie,re,ne,ae,oe,se,ce,le,pe,de,he=arguments;return(0,x.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=he.length,c=new Array(i),p=0;p<i;p++)c[p]=he[p];if(R=c[0],k=c[1],t.prev=2,D=(O=window.Request&&R instanceof Request?new URL(R.url,window.location.origin):new URL(R.toString(),window.location.origin)).origin===window.location.origin,z=O.pathname.replace(/\/+$/,""),j=null===(C=k)||void 0===C||null===(S=C.method)||void 0===S?void 0:S.toLowerCase(),V=performance.now(),X=!1,!(W=!1)&&null!==(P=k)&&void 0!==P&&P.anticrawler&&(W=!0),u&&(M.some((function(e){return z===e}))||q.some((function(e){return z===e}))||B.some((function(e){return z===e})))&&(X=!0),!W&&f&&Array.isArray(f)&&f.length>0&&(W=Boolean(ke(f,z,D,j))),!W){t.next=15;break}return l.hookFUFetch.onInit(),Z({}),$=Q(),t.next=9,Y();case 9:ee=t.sent,te=N(),window.Request&&R instanceof Request?(R.headers.set(A,$),R.headers.set(E,ee),Object.entries(te).forEach((function(e){var t=e[0],i=e[1];R.headers.set(t,i)})),X&&(ie=Ue(),R.headers.set(T,ie))):k?Array.isArray(k.headers)?(k.headers.push([A,$]),k.headers.push([E,ee]),Object.entries(te).forEach((function(e){var t,i=e[0],r=e[1];(null===(t=k)||void 0===t?void 0:t.headers).push([i,r])})),X&&(re=Ue(),k.headers.push([T,re]))):k.headers=(0,H.Z)({},k.headers,te,((G={})[E]=ee,G[A]=$,G),X?((b={})[T]=Ue(),b):{}):((_={}).headers=(0,H.Z)({},te,((J={})[E]=ee,J[A]=$,J),X?((y={})[T]=Ue(),y):{}),k=_),(a===w.PC||a===w.RW)&&(!window.__SFUC&&(window.__SFUC=0),window.__SFUC++),ne=performance.now(),ae=Math.floor(ne-V),(null===(K=k)||void 0===K||!K.anticrawler)&&l.hookFUFetch.onComplete(ae);case 15:return t.next=17,e(R,k);case 17:if((oe=t.sent)&&oe.ok){t.next=20;break}return t.abrupt("return",oe);case 20:if(t.prev=20,se=oe.status,!(W&&se>=200&&se<300&&204!==se)){t.next=32;break}if(!(ce=oe.headers.get("content-type"))||!ce.includes("application/json")){t.next=32;break}return t.next=27,oe.clone().json();case 27:if((pe=t.sent)&&"object"==typeof pe&&!Array.isArray(pe)){t.next=30;break}return t.abrupt("return",oe);case 30:de=null!==(le=k)&&void 0!==le&&le.anticrawler?k.anticrawler:null==s?void 0:s[z],be((m=Le,(g={}).antiCrawlerConfig=(0,H.Z)({redirectType:a==w.PC||a==w.RW?d.Internal:d.External,verificationPageHost:a==w.PC||a==w.RW?location.origin:ue((v={},v.env=n||"live",v.locale=r||"SG",v))},de,{shouldReplaceHistory:!1!==(null==de?void 0:de.shouldReplaceHistory)&&"false"!==(null==de?void 0:de.shouldReplaceHistory)}),g.response=pe,g.pathname=z,g.platform=a,g.source=o,g.setRedirecting=I,g.getRedirecting=U,g[m(2)]=function(e){return me((0,H.Z)({},e,{history:F}))},g[m(3)]=function(e){return ge((0,H.Z)({},e,{history:F}))},g[m(4)]=function(e){return ve((0,H.Z)({},e,{history:F}))},g.enablePopup=h,g));case 32:return t.abrupt("return",oe);case 35:return t.prev=35,t.t0=t.catch(20),t.abrupt("return",(L(t.t0),oe));case 38:t.next=43;break;case 40:return t.prev=40,t.t1=t.catch(2),t.abrupt("return",(L(t.t1),e.apply(void 0,c)));case 43:case"end":return t.stop()}}),t,null,[[2,40],[20,35]])})));var t=XMLHttpRequest.prototype.open,i=XMLHttpRequest.prototype.setRequestHeader,c=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];this.openargs=i,this.headers={},t.apply(this,i)},XMLHttpRequest.prototype.setRequestHeader=function(e,t){this.headers[e]=t,i.call(this,e,t)},XMLHttpRequest.prototype.send=function(){var e=(0,C.Z)((0,x.Z)().mark((function e(t){var i,p,v,m,g,y,_,b,R,k,C,S,P,O,D,z=this;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,i="",p=!1,v=!1,!this.openargs){e.next=19;break}if(m=new URL(this.openargs[1].toString(),window.location.origin),g=m.origin===window.location.origin,i=m.pathname.replace(/\/+$/,""),y=this.openargs[0].toLowerCase(),_=performance.now(),f&&Array.isArray(f)&&f.length>0&&(p=Boolean(ke(f,i,g,y))),u&&(M.some((function(e){return i===e}))||q.some((function(e){return i===e}))||B.some((function(e){return i===e})))&&(v=!0),!p){e.next=19;break}for(k in l.hookFUXhr.onInit(),Z({}),b=Q(),!this.headers[A]&&this.setRequestHeader(A,b),R=N())!this.headers[k]&&this.setRequestHeader(k,R[k]);return e.next=14,Y();case 14:C=e.sent,!this.headers[E]&&this.setRequestHeader(E,C),v&&(S=Ue(),!this.headers[T]&&this.setRequestHeader(T,S)),(a===w.PC||a===w.RW)&&(!window.__SFUC&&(window.__SFUC=0),window.__SFUC++),P=performance.now(),O=Math.floor(P-_),l.hookFUXhr.onComplete(O);case 19:D=this.onreadystatechange,this.onreadystatechange=function(){if(z.readyState===XMLHttpRequest.DONE)try{if(p&&z.status>=200&&z.status<300&&204!==z.status){var e=z.getResponseHeader("Content-Type");if(e&&!e.includes("application/json"))return;var t=z.responseType;if("blob"==t||"arraybuffer"==t||"document"==t)return;var c=t&&"text"!==t&&z.response?z.response:JSON.parse(z.responseText),l=null==s?void 0:s[i];be((f=Le,(v={}).antiCrawlerConfig=(0,H.Z)({redirectType:a==w.PC||a==w.RW?d.Internal:d.External,verificationPageHost:a==w.PC||a==w.RW?location.origin:ue((u={},u.env=n||"live",u.locale=r||"SG",u))},l,{shouldReplaceHistory:"false"!==(null==l?void 0:l.shouldReplaceHistory)}),v.response=c,v.pathname=i,v.source=o,v.platform=a,v.setRedirecting=I,v.getRedirecting=U,v[f(2)]=function(e){return me((0,H.Z)({},e,{history:F}))},v[f(3)]=function(e){return ge((0,H.Z)({},e,{history:F}))},v[f(4)]=function(e){return ve((0,H.Z)({},e,{history:F}))},v.enablePopup=h,v))}}catch(r){L(r)}for(var u,f,v,m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];null==D||D.apply(z,g)},e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),L(e.t0);case 26:return e.prev=26,c.call(this,t),e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[0,23,26,29]])})));return function(t){return e.apply(this,arguments)}}()}}(),(t={}).i=Z,t.o=Q,t.l=Y,t.p=function(){return J.apply(this,arguments)},t.u=N,t.h=function(e){return ve((0,H.Z)({},e,{history:F}))},t.v=function(e){return me((0,H.Z)({},e,{history:F}))},t.m=function(e){return ge((0,H.Z)({},e,{history:F}))},t._=j,t.R=function(e){return X.apply(this,arguments)},t.getRedirecting=U,t.setRedirecting=I,t.ACConfig=s,t}function Le(e,t){var i=N,r=i();return!i.cw&&(i.cw=[]),Le=function(t,n){t-=0;var a=i.cw[t];return a||(void 0===Le.ck&&(Le.cq=function(e){for(var t,i,r="",n="",a=0,o=0;i=e.charAt(o++);~i&&(t=a%4?64*t+i:i,a++%4)?r+=String.fromCharCode(255&t>>(-2*a&6)):0)i="znprxigfkhdwembtlavojsqycuDFCQNPGYTHXSLBJAMUEVIWRKOZ4908172356+/=".indexOf(i);for(var s=0,c=r.length;s<c;s++)n+="%"+("00"+r.charCodeAt(s).toString(16)).slice(-2);return decodeURIComponent(n)},e=arguments,Le.ck=!0),a=Le.cq(r[t]),i.cw[t]=a),a},Le(e,t)}var Ze,Me,qe,Be,ze,Ne,je,Ve,We,Xe,Qe,Ye,Ge,Je,Ke,$e,et,tt,it,rt,nt,at,ot,st,ct,lt,pt,ut,dt,ht,ft,vt,mt,gt,yt,_t,wt,bt,Rt,kt=((Me={})["/webapi/v1/shop_page/replay/add"]={shouldReplaceHistory:"false"},Me["/webapi/v1/host_config/permission"]={shouldReplaceHistory:"false"},Me["/webapi/v1/item/my_shop"]={shouldReplaceHistory:"false"},Me["/webapi/v1/item/my_likes"]={shouldReplaceHistory:"false"},Me["/webapi/v1/item/my_recent"]={shouldReplaceHistory:"false"},Me["/webapi/v1/item/parse_url"]={shouldReplaceHistory:"false"},Me),xt=((Ze={})["/api/v4/microsite/get_items"]={shouldReplaceHistory:"false"},Ze["/api/v4/market_coin/get_product_feeds"]={shouldReplaceHistory:"false"},Ze["/api/v2/add_on_deal/info"]={shouldReplaceHistory:"false"},Ze["/api/v2/add_on_deal/get_main_item_info"]={shouldReplaceHistory:"false"},Ze["/api/v2/add_on_deal/get_add_on_deal_list"]={shouldReplaceHistory:"false"},Ze["/api/v2/add_on_deal/get_sub_item_info"]={shouldReplaceHistory:"false"},Ze["/api/v4/flash_sale/flash_sale_get_items"]={shouldReplaceHistory:"false"},Ze["/api/v4/flash_sale/spm/get_all_itemids"]={shouldReplaceHistory:"false"},Ze["/api/v4/pdp/other_quantities/get"]={shouldReplaceHistory:"false"},Ze["/api/v4/product/get_shop_info"]={shouldReplaceHistory:"false"},Ze["/api/v4/search/search_prefills"]={shouldReplaceHistory:"false"},Ze["/api/v4/search/search_hint"]={shouldReplaceHistory:"false"},Ze["/api/v4/search/trending_search"]={shouldReplaceHistory:"false"},Ze),Ct=[(bt={policyurl:/api\/v3\/affiliateplatform\/.*/,match:"regexp"},bt),(wt={policyurl:/api\/pas\/v1\/setup_helper\/.*/,match:"regexp"},wt),(_t={policyurl:"api/selleradmin/v1/product",match:"contain"},_t),(yt={policyurl:"api/marketing/v4/review_prize/get_products",match:"contain"},yt),(gt={policyurl:"api/marketing/v4/discount/global/get_items",match:"contain"},gt),(mt={policyurl:"api/v3/settings/reply_shop_rating",match:"contain"},mt),(vt={policyurl:"api/marketing/v3/public/product_selector",match:"contain"},vt),(ft={policyurl:/webchat\/api\/v1\.2\/mini\/order\/.*/,match:"regexp"},ft),(ht={policyurl:/webchat\/api\/v1\.2\/order\/.*\/rate_buyer/,match:"regexp"},ht),(dt={policyurl:/webchat\/api\/v1\.2\/order\/.*\/cancel/,match:"regexp"},dt),(ut={policyurl:"webchat/api/v1.2/mini/orders/orders_by_buyer",match:"contain"},ut),(pt={policyurl:"webchat/api/v1.2/orders/orders_by_buyer",match:"contain"},pt),(lt={policyurl:"api/mkt/cmt/bidding/bidding_list",match:"contain"},lt),(ct={policyurl:"api/mkt/cmt/nominated/nominated_entity_list",match:"contain"},ct),(st={policyurl:"api/mkt/cmt/preview/preview_list",match:"contain"},st),(ot={policyurl:"api/mkt/cmt/product/online/selector/verify",match:"contain"},ot),(at={policyurl:"api/mkt/cmt/product/online/selector/verify_products_select_for_bid",match:"contain"},at),(nt={policyurl:"api/crm/v1/product_selector",match:"contain"},nt),(rt={policyurl:"api/marketing/v4/graphql/query",match:"contain"},rt),(it={policyurl:"api/marketing/v4/public/product_selector",match:"contain"},it),(tt={policyurl:"api/marketing/v4/shop_flash_sale/batch_items/get",match:"contain"},tt),(et={policyurl:"api/n/decoration/public/get_flash_sale_info",match:"contain"},et),($e={policyurl:"api/n/decoration/public/get_mega_campaign_items",match:"contain"},$e),(Ke={policyurl:"api/marketing/v4/review_prize/get_recommend_products",match:"contain"},Ke),(Je={policyurl:"api/marketing/v4/review_prize/get_svs_item_info",match:"contain"},Je),(Ge={policyurl:"api/marketing/v4/review_prize/item/list",match:"contain"},Ge),(Ye={policyurl:"api/marketing/v4/review_prize/product_selector",match:"contain"},Ye),(Qe={policyurl:"api/marketing/v3/voucher/product_selector",match:"contain"},Qe),(Xe={policyurl:"api/v1/affiliateplatform/shop/itemsv2",match:"contain"},Xe),(We={policyurl:"api/v3/affiliateplatform/gql",match:"contain"},We),(Ve={policyurl:"api/tool/mass_product/get_unpublished_product_list",match:"contain"},Ve),(je={policyurl:"api/v2/message",match:"contain",allowCors:!0},je),(Ne={policyurl:"api/v2/solution",match:"contain",allowCors:!0},Ne),(ze={policyurl:"api/v2/user_message_history",match:"contain",allowCors:!0},ze),(Be={policyurl:"api/v2/init_session",match:"contain",allowCors:!0},Be),(qe={policyurl:"api/v2/order_list",match:"contain",allowCors:!0},qe)];function Ht(e){var t,r,n,a,o,s=e.locale,c=e.env,l=e.platform,p=e.source,u=e.enableGlobalHook,d=e.enableTMS,h=e.baseUrl,f=void 0===h?"":h,v=e.shouldAppendHost,m=(e.allowShortDfp,e.headers),g=e.enablePopup,y=void 0!==g&&g,_=e.handleMaintenanceModeResponse,b=e.policies,R=e.performanceTrackings,k=void 0===R?D:R,E=e.onError,T=void 0===E?function(){}:E,F=e.onJsonResponse,O=void 0===F?function(){}:F,I=(n={},(r=l)==w.PC||r==w.RW?n=xt:r===w.SHOPEELIVE&&(n=kt),n),U=De(((t={}).locale=s,t.platform=l,t.source=p,t.policies=b,t.env=c,t.ACConfig=I,t.performanceTrackings=k,t.enableTMS=d,t.enableGlobalHook=u,t.enablePopup=y,t.onError=T,t)),L=U.i,Z=U._,M=U.R,q=U.v,B=U.m,N=U.h,j=U.o,V=(U.l,U.p);function X(e,t,i){return Q.apply(this,arguments)}function Q(){return Q=(0,C.Z)((0,x.Z)().mark((function e(t,r,n){var a,o,s,c,l,p,u,d,h,g;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=!W&&!/^(https?:)?\/\//.test(t)||v?""+f+t:t,o=null!=r&&r.isFormData?n||new FormData:JSON.stringify(n),s=null!=r&&r.isFormData?void 0:{Accept:"application/json","Content-Type":"application/json"},e.next=6,(window.global=window,i.g&&i.g.fetch?i.g.fetch:fetch)(a,(0,H.Z)({method:r&&r.method?r.method:"GET",headers:(0,H.Z)({},s,null!=r&&r.overideCreateSFUHeaders?null==r?void 0:r.headers:(0,H.Z)({},m,null==r?void 0:r.headers))},r&&!1===r.withCredentials?{}:{credentials:"include"},{body:o,signal:null==r?void 0:r.signal,anticrawler:null==r?void 0:r.antiCrawlerConfig}));case 6:if(c=e.sent,!((l=c.status)>=200&&l<300)){e.next=16;break}if(!(p=c.headers.get("content-type"))||p.includes("application/json")){e.next=12;break}return e.abrupt("return",c);case 12:return e.next=14,c.json();case 14:return u=e.sent,e.abrupt("return",(O(u,c),"object"!=typeof u||Array.isArray(u)?u:(0,H.Z)({},u,{__raw:c})));case 16:return e.abrupt("return",408===l?((g={}).error=z.REQUEST_TIMEOUT,g.error_msg=l.toString(),g.__raw=c,g):(_&&_(c),(h={}).error=z.SERVER_ERROR,h.error_msg=null==l?void 0:l.toString(),h.__raw=c,h));case 19:return e.prev=19,e.t0=e.catch(0),e.abrupt("return",((d={}).error=z.SERVER_ERROR,d.error_msg=e.t0,d));case 22:case"end":return e.stop()}}),e,null,[[0,19]])}))),Q.apply(this,arguments)}function Y(){return Y=(0,C.Z)((0,x.Z)().mark((function e(t,i){var r,n,a,o,s,c,l,p,u,d,h,f;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Le,a=(null==i?void 0:i[n(6)])||{},o=a.antiCrawler,s=a.apiProtection,(c=a.deviceFingerPrint)&&L({}),e.next=4,c?M(((u={useHeader:!0})[(p=Le)(5)]=c[p(5)]||!1,u.customDfp=c.customDfp,u)):Promise.resolve({});case 4:return d=e.sent,h=null!=c&&c.dataFormatter?c.dataFormatter(d["sz-token"]||""):d,f=o?U.u():{},e.next=9,X(t,((l={method:"GET"}).headers=(0,H.Z)({},null==i?void 0:i.headers,f,h,((r={})[A]=j(),r)),l.overideCreateSFUHeaders=null==i?void 0:i.overideCreateSFUHeaders,l.withCredentials=null==s?void 0:s.withCredentials,l.signal=null==i?void 0:i.signal,l.antiCrawlerConfig=o,l));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)}))),Y.apply(this,arguments)}function G(){return G=(0,C.Z)((0,x.Z)().mark((function e(t,i,r){var n,a;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in n=new FormData,i)n.append(a,i[a]);return e.abrupt("return",J(t,n,(0,H.Z)({},r,{isFormData:!0})));case 3:case"end":return e.stop()}}),e)}))),G.apply(this,arguments)}function J(e,t,i){return K.apply(this,arguments)}function K(){return K=(0,C.Z)((0,x.Z)().mark((function e(t,i,r){var n,a,o,s,c,l,p,u,d,h,f,v,m,g;return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Le,o=(null==r?void 0:r[a(6)])||{},s=o.antiCrawler,c=o.apiProtection,(l=o.deviceFingerPrint)&&L({}),!l){e.next=8;break}return e.next=5,M((d=Le,(h={}).useHeader=null==l?void 0:l.useHeader,h[d(5)]=l[d(5)]||!1,h.customDfp=l.customDfp,h));case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0={};case 9:return f=e.t0,v=null!=l&&l.dataFormatter?l.dataFormatter(null!=l&&l.useHeader?f[P]||"":f[S]||""):f,m=null!=r&&r.isFormData||null!=l&&l.useHeader||(u=v)&&0===Object.keys(u).length&&Object.getPrototypeOf(u)===Object.prototype?i:(0,H.Z)({},i,v),g=s?U.u():{},e.next=15,X(t,((p={method:"POST"}).headers=(0,H.Z)({},null==r?void 0:r.headers,g,null!=l&&l.useHeader?v:{},((n={})[A]=j(),n)),p.isFormData=null==r?void 0:r.isFormData,p.overideCreateSFUHeaders=null==r?void 0:r.overideCreateSFUHeaders,p.withCredentials=null==c?void 0:c.withCredentials,p.signal=null==r?void 0:r.signal,p.antiCrawlerConfig=s,p),m);case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)}))),K.apply(this,arguments)}return a=Le,(o={}).http=X,o.get=function(e,t){return Y.apply(this,arguments)},o.post=J,o.postForm=function(e,t,i){return G.apply(this,arguments)},o[a(0)]=function(e){var t;W&&U.i(((t={}).history=null==e?void 0:e.history,t))},o[a(4)]=N,o[a(2)]=q,o[a(3)]=B,o[a(7)]=Z,o.getLongToken=V,o}[(Rt={policyurl:"api/mydata",match:"contain",exclude:["api/mydata/homepage/key-metrics"]},Rt)].concat(Ct)}}]);
//# sourceMappingURL=https://sourcemap.webfe.shopeemobile.com/pcmall-static/_/sfu-latest.0c0899af4c49f388.legacy.js.map